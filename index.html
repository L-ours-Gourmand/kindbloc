<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Planificateur visuel - Prototype v3</title>
<style>
body{margin:0;font-family:Arial,Helvetica,sans-serif;background:#f7f9fc;color:#1a1a1a;}
.sidebar{width:320px;min-height:100vh;background:#fff;border-right:1px solid #ddd;overflow-y:auto;padding:16px;box-sizing:border-box;position:relative;}
.sidebar h2{margin:0 0 8px;font-size:18px;}
#settingsBtn{position:absolute;top:12px;right:12px;background:none;border:none;cursor:pointer;}
.main{margin-left:320px;padding:16px;overflow:auto;}
.btn{padding:8px 12px;border:none;border-radius:6px;background:#3467eb;color:#fff;cursor:pointer;}
.task{background:#e8eefc;border:2px solid #3467eb;border-radius:8px;padding:8px;margin-bottom:8px;display:flex;justify-content:space-between;align-items:center;cursor:grab;}
.task .time{background:#fff;border-radius:6px;padding:4px 6px;font-size:12px;border:2px solid #3467eb;}
.task .controls{display:flex;gap:6px;align-items:center;}
.task .icon-btn{width:24px;height:24px;border:none;background:none;cursor:pointer;}
.timeline{border:1px solid #ccc;border-radius:8px;background:#fff;padding:8px;overflow-x:auto;white-space:nowrap;position:relative;}
.hour-marker{display:inline-block;width:80px;text-align:center;border-right:1px dashed #eee;position:relative;}
.hour-marker::before{content:'';position:absolute;top:0;left:50%;width:1px;height:100%;background:#f0f0f0;}
.hour-marker .minor{position:absolute;top:0;left:25%;width:1px;height:100%;background:#f3f3f3;}
.hour-marker .medium{position:absolute;top:0;left:50%;width:1px;height:100%;background:#ddd;}
.task-block{display:inline-block;position:absolute;border-radius:8px;padding:8px;min-width:60px;color:#fff;font-weight:bold;}
.task-block .time-badge{background:#fff;color:#000;padding:4px 6px;border-radius:6px;border:2px solid rgba(0,0,0,0.2);position:absolute;right:6px;top:6px;font-size:12px;}
.block-controls{position:absolute;right:6px;bottom:6px;display:flex;gap:4px;align-items:center;}
.done-check{width:20px;height:20px;}
@media (max-width:700px){
  .sidebar{width:100%;min-height:auto;border:none;border-bottom:1px solid #ccc;}
  .main{margin-left:0;}
}
</style>
</head>
<body>
<div class="sidebar">
  <h2>Planificateur</h2>
  <button id="settingsBtn" title="Param√®tres">‚öôÔ∏è</button>
  <button id="addTaskBtn" class="btn">+ Nouvelle t√¢che</button>
  <div id="taskList"></div>
</div>
<div class="main">
  <div class="timeline" id="timeline">
    <div style="display:flex;">
      <!-- Heures -->
      ${[...Array(24).keys()].map(h=>`<div class='hour-marker'>${h.toString().padStart(2,'0')}h<span class='minor'></span><span class='medium'></span></div>`).join('')}
    </div>
  </div>
</div>
<script>
const taskList=document.getElementById('taskList');
const addTaskBtn=document.getElementById('addTaskBtn');
let tasks=[];
function renderTasks(){
 taskList.innerHTML='';
 tasks.forEach((t,i)=>{
  const div=document.createElement('div');
  div.className='task';
  div.style.background=t.color;div.style.borderColor=t.color;
  div.innerHTML=\`<span>\${t.name}</span><span class='time'>\${t.duration} min</span>
   <div class='controls'>
     <button class='icon-btn' onclick='editTask(\${i})'>‚úèÔ∏è</button>
     <button class='icon-btn' onclick='deleteTask(\${i})'>üóëÔ∏è</button>
     <input type='checkbox' class='done-check' \${t.done?'checked':''} onchange='toggleDone(\${i})'/>
   </div>\`;
  taskList.appendChild(div);
 });
 localStorage.setItem('tasks_v3',JSON.stringify(tasks));
}
function loadTasks(){
 tasks=JSON.parse(localStorage.getItem('tasks_v3')||'[]');
 renderTasks();
}
function addTask(){
 const name=prompt('Nom de la t√¢che ?');if(!name)return;
 const duration=parseInt(prompt('Dur√©e (en minutes, multiple de 5)',60));
 const color=prompt('Couleur (#rrggbb)', '#3467eb');
 tasks.push({name,duration:duration||60,color,done:false});
 renderTasks();
}
function editTask(i){
 const t=tasks[i];const n=prompt('Nouveau nom',t.name);
 const d=parseInt(prompt('Dur√©e (en minutes)',t.duration));
 const c=prompt('Couleur (#rrggbb)',t.color);
 if(!n)return;
 tasks[i]={...t,name:n,duration:d||t.duration,color:c};
 renderTasks();
}
function deleteTask(i){if(confirm('Supprimer ?')){tasks.splice(i,1);renderTasks();}}
function toggleDone(i){tasks[i].done=!tasks[i].done;renderTasks();}
addTaskBtn.onclick=addTask;
loadTasks();
</script>
</body>
</html>